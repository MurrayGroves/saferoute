{"version":3,"sources":["../../src/GeneralSettingsPanel/index.tsx"],"names":["coreUtils","React","useCallback","CheckboxSelector","DropdownSelector","S","SliderSelector","GeneralSettingsPanel","className","onQueryParamChange","paramNames","query","defaultParams","queryParamMessages","style","supportedModes","handleChange","queryParam","configWrapper","modes","map","param","paramInfo","queryParams","getCustomQueryParams","find","qp","name","routingTypes","includes","routingType","applicable","label","getQueryParamProperty","icon","selector","labelHigh","labelLow","high","low","step"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,6BAAtB;AAEA,OAAOC,KAAP,IAA8BC,WAA9B,QAAiD,OAAjD;AAEA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,OAAO,KAAKC,CAAZ,MAAmB,WAAnB,C,CAEA;;AAGA,OAAOC,cAAP,MAA2B,mBAA3B;;AA+CA;AACA;AACA;AACA,eAAe,SAASC,oBAAT,OAQ6B;AAAA,4BAP1CC,SAO0C;AAAA,MAP1CA,SAO0C,+BAP9B,IAO8B;AAAA,mCAN1CC,kBAM0C;AAAA,MAN1CA,kBAM0C,sCANrB,IAMqB;AAAA,6BAL1CC,UAK0C;AAAA,MAL1CA,UAK0C,gCAL7BV,SAAS,CAACW,KAAV,CAAgBC,aAKa;AAAA,wBAJ1CD,KAI0C;AAAA,MAJ1CA,KAI0C,2BAJlC,IAIkC;AAAA,mCAH1CE,kBAG0C;AAAA,MAH1CA,kBAG0C,sCAHrB,IAGqB;AAAA,MAF1CC,KAE0C,QAF1CA,KAE0C;AAAA,MAD1CC,cAC0C,QAD1CA,cAC0C;AAC1C,MAAMC,YAAY,GAAGd,WAAW,CAC9B,UAACe,UAAD,EAAuC;AACrC,QAAI,OAAOR,kBAAP,KAA8B,UAAlC,EAA8C;AAC5CA,MAAAA,kBAAkB,CAACQ,UAAD,CAAlB;AACD;AACF,GAL6B,EAM9B,CAACR,kBAAD,CAN8B,CAAhC;AASA,MAAMS,aAAa,GAAG;AAAEC,IAAAA,KAAK,EAAEJ;AAAT,GAAtB;AAEA,sBACE,oBAAC,CAAD,CAAG,oBAAH;AAAwB,IAAA,SAAS,EAAEP,SAAnC;AAA8C,IAAA,KAAK,EAAEM;AAArD,KACGJ,UAAU,CAACU,GAAX,CAAe,UAAAC,KAAK,EAAI;AACvB,QAAMC,SAAS,GAAGtB,SAAS,CAACuB,WAAV,CACfC,oBADe,CACMX,kBADN,EAEfY,IAFe,CAEV,UAAAC,EAAE;AAAA,aAAIA,EAAE,CAACC,IAAH,KAAYN,KAAhB;AAAA,KAFQ,CAAlB,CADuB,CAIvB;;AACA,QAAI,CAACC,SAAS,CAACM,YAAV,CAAuBC,QAAvB,CAAgClB,KAAK,CAACmB,WAAtC,CAAL,EAAyD,OAAO,IAAP,CALlC,CAOvB;;AACA,QACE,OAAOR,SAAS,CAACS,UAAjB,KAAgC,UAAhC,IACA,CAACT,SAAS,CAACS,UAAV,CAAqBpB,KAArB,EAA4BO,aAA5B,CAFH,EAGE;AACA,aAAO,IAAP;AACD;;AAED,QAAMc,KAAK,GAAGhC,SAAS,CAACW,KAAV,CAAgBsB,qBAAhB,CACZX,SADY,EAEZ,OAFY,EAGZX,KAHY,CAAd;AAKA,QAAMuB,IAAI,GAAGlC,SAAS,CAACW,KAAV,CAAgBsB,qBAAhB,CACXX,SADW,EAEX,MAFW,EAGXX,KAHW,CAAb,CApBuB,CA0BvB;;AACA,YAAQW,SAAS,CAACa,QAAlB;AACE,WAAK,UAAL;AACE,4BACE,oBAAC,gBAAD;AACE,UAAA,GAAG,EAAEb,SAAS,CAACK,IADjB;AAEE,UAAA,KAAK,EAAEK,KAFT;AAGE,UAAA,IAAI,EAAEV,SAAS,CAACK,IAHlB;AAIE,UAAA,QAAQ,EAAEX,YAJZ;AAKE,UAAA,OAAO,EAAEhB,SAAS,CAACW,KAAV,CAAgBsB,qBAAhB,CACPX,SADO,EAEP,SAFO,EAGPX,KAHO,CALX;AAUE,UAAA,KAAK,EAAEA,KAAK,CAACW,SAAS,CAACK,IAAX,CAAL,IAAyBL,SAAS;AAV3C,UADF;;AAcF,WAAK,UAAL;AACE,4BACE,oBAAC,gBAAD;AACE,UAAA,GAAG,EAAEA,SAAS,CAACU,KADjB;AAEE,UAAA,KAAK,eACH,0CACGE,IADH,EAEGF,KAFH,CAHJ;AAQE,UAAA,IAAI,EAAEV,SAAS,CAACK,IARlB;AASE,UAAA,QAAQ,EAAEX,YATZ;AAUE,UAAA,KAAK,EAAEL,KAAK,CAACW,SAAS,CAACK,IAAX;AAVd,UADF;;AAcF,WAAK,QAAL;AACE,4BACE,oBAAC,cAAD;AACE,UAAA,GAAG,EAAEL,SAAS,CAACU,KADjB;AAEE,UAAA,KAAK,EAAEA,KAFT;AAGE,UAAA,SAAS,EAAEV,SAAS,CAACc,SAHvB;AAIE,UAAA,QAAQ,EAAEd,SAAS,CAACe,QAJtB;AAKE,UAAA,GAAG,EAAEf,SAAS,CAACgB,IALjB;AAME,UAAA,GAAG,EAAEhB,SAAS,CAACiB,GANjB;AAOE,UAAA,IAAI,EAAEjB,SAAS,CAACK,IAPlB;AAQE,UAAA,QAAQ,EAAEX,YARZ;AASE,UAAA,IAAI,EAAEM,SAAF,aAAEA,SAAF,uBAAEA,SAAS,CAAEkB,IATnB;AAUE,UAAA,KAAK,EAAE7B,KAAK,CAACW,SAAS,CAACK,IAAX;AAVd,UADF;;AAcF;AACE,eAAO,IAAP;AA/CJ;AAiDD,GA5EA,CADH,CADF;AAiFD","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\nimport CSS from \"csstype\";\nimport React, { ReactElement, useCallback } from \"react\";\n\nimport CheckboxSelector from \"../CheckboxSelector\";\nimport DropdownSelector from \"../DropdownSelector\";\nimport * as S from \"../styled\";\n\n// eslint-disable-next-line prettier/prettier\nimport type { ConfiguredModes, CustomQueryParameters, QueryParamChangeEvent } from \"../types\";\nimport type { QueryParams } from \"../TripOptions/types\";\nimport SliderSelector from \"../SliderSelector\";\n\ninterface GeneralSettingsPanelProps {\n  /**\n   * The CSS class name to apply to this element.\n   */\n  className?: string;\n  /**\n   * An object {parameterName: value, ...} whose attributes correspond to query parameters.\n   * For query parameter names and value formats,\n   * see https://github.com/opentripplanner/otp-ui/blob/master/packages/core-utils/src/__tests__/query.js#L14\n   */\n  // Disable type check because the only use of queryParams is to be passed to\n  // method getQueryParamProperty from \"@opentripplanner/core-utils/query\".\n  // eslint-disable-next-line react/forbid-prop-types\n  query?: QueryParams;\n  /**\n   * An optional object that defines customizations for certain query parameters\n   * to change the label or list of options (both text and values) displayed for the desired parameters.\n   * Customizations can be as few or as many as needed.\n   * For a given parameter, default values from core-utils are used if no customization is provided.\n   * If custom options are provided for a parameter, only those provided will be displayed.\n   *\n   * For query parameter names and value formats,\n   * see https://github.com/opentripplanner/otp-ui/blob/master/packages/core-utils/src/__tests__/query.js#L14\n   */\n  queryParamMessages?: CustomQueryParameters;\n  /**\n   * An array of parameter names to support in the settings panel.\n   * See the `query` parameter for more on query parameter names.\n   */\n  paramNames?: string[];\n  /**\n   * Triggered when the value of a trip setting is changed by the user.\n   * @param arg The data {name: value} of the changed trip setting.\n   */\n  onQueryParamChange?: (e: QueryParamChangeEvent) => void;\n  /**\n   * Standard React inline style prop.\n   */\n  style?: CSS.Properties;\n  /**\n   * An array of supported modes that will be displayed as options.\n   */\n  supportedModes: ConfiguredModes;\n}\n\n/**\n * The general settings panel for setting speed and routing optimization controls.\n */\nexport default function GeneralSettingsPanel({\n  className = null,\n  onQueryParamChange = null,\n  paramNames = coreUtils.query.defaultParams,\n  query = null,\n  queryParamMessages = null,\n  style,\n  supportedModes\n}: GeneralSettingsPanelProps): ReactElement {\n  const handleChange = useCallback(\n    (queryParam: QueryParamChangeEvent) => {\n      if (typeof onQueryParamChange === \"function\") {\n        onQueryParamChange(queryParam);\n      }\n    },\n    [onQueryParamChange]\n  );\n\n  const configWrapper = { modes: supportedModes };\n\n  return (\n    <S.GeneralSettingsPanel className={className} style={style}>\n      {paramNames.map(param => {\n        const paramInfo = coreUtils.queryParams\n          .getCustomQueryParams(queryParamMessages)\n          .find(qp => qp.name === param);\n        // Check that the parameter applies to the specified routingType\n        if (!paramInfo.routingTypes.includes(query.routingType)) return null;\n\n        // Check that the applicability test (if provided) is satisfied\n        if (\n          typeof paramInfo.applicable === \"function\" &&\n          !paramInfo.applicable(query, configWrapper)\n        ) {\n          return null;\n        }\n\n        const label = coreUtils.query.getQueryParamProperty(\n          paramInfo,\n          \"label\",\n          query\n        );\n        const icon = coreUtils.query.getQueryParamProperty(\n          paramInfo,\n          \"icon\",\n          query\n        );\n\n        // Create the UI component based on the selector type\n        switch (paramInfo.selector) {\n          case \"DROPDOWN\":\n            return (\n              <DropdownSelector\n                key={paramInfo.name}\n                label={label}\n                name={paramInfo.name}\n                onChange={handleChange}\n                options={coreUtils.query.getQueryParamProperty(\n                  paramInfo,\n                  \"options\",\n                  query\n                )}\n                value={query[paramInfo.name] || paramInfo.default}\n              />\n            );\n          case \"CHECKBOX\":\n            return (\n              <CheckboxSelector\n                key={paramInfo.label}\n                label={\n                  <>\n                    {icon}\n                    {label}\n                  </>\n                }\n                name={paramInfo.name}\n                onChange={handleChange}\n                value={query[paramInfo.name]}\n              />\n            );\n          case \"SLIDER\":\n            return (\n              <SliderSelector\n                key={paramInfo.label}\n                label={label}\n                labelHigh={paramInfo.labelHigh}\n                labelLow={paramInfo.labelLow}\n                max={paramInfo.high}\n                min={paramInfo.low}\n                name={paramInfo.name}\n                onChange={handleChange}\n                step={paramInfo?.step}\n                value={query[paramInfo.name]}\n              />\n            )\n          default:\n            return null;\n        }\n      })}\n    </S.GeneralSettingsPanel>\n  );\n}\n"],"file":"index.js"}