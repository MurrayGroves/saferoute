{"version":3,"sources":["../../src/AccessLegBody/index.js"],"names":["coreUtils","React","Component","PropTypes","VelocityTransitionGroup","AccessLegSteps","AccessLegSummary","LegDiagramPreview","MapillaryButton","RentedVehicleSubheader","Styled","TNCLeg","AccessLegBody","props","onStepsHeaderClick","expanded","state","setState","onSummaryClick","leg","legIndex","setActiveLeg","config","diagramVisible","followsTransit","LegIcon","mapillaryCallback","mapillaryKey","setLegDiagram","showElevationProfile","showLegIcon","timeOptions","mode","hailedCar","rentedVehicle","rentedBike","rentedCar","time","formatDuration","duration","steps","from","animation","propTypes","types","configType","isRequired","legType","bool","elementType","number","func","string","timeOptionsType","defaultProps"],"mappings":"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","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\n\nimport AccessLegSteps from \"./access-leg-steps\";\nimport AccessLegSummary from \"./access-leg-summary\";\nimport LegDiagramPreview from \"./leg-diagram-preview\";\nimport MapillaryButton from \"./mapillary-button\";\nimport RentedVehicleSubheader from \"./rented-vehicle-subheader\";\nimport * as Styled from \"../styled\";\nimport TNCLeg from \"./tnc-leg\";\n\n/**\n * Component for access (e.g. walk/bike/etc.) leg in narrative itinerary. This\n * particular component is used in the line-itin (i.e., trimet-mod-otp) version\n * of the narrative itinerary.\n */\nclass AccessLegBody extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { expanded: false };\n  }\n\n  onStepsHeaderClick = () => {\n    const { expanded } = this.state;\n    this.setState({ expanded: !expanded });\n  };\n\n  onSummaryClick = () => {\n    const { leg, legIndex, setActiveLeg } = this.props;\n    setActiveLeg(legIndex, leg);\n  };\n\n  render() {\n    const {\n      config,\n      diagramVisible,\n      followsTransit,\n      leg,\n      LegIcon,\n      mapillaryCallback,\n      mapillaryKey,\n      setLegDiagram,\n      showElevationProfile,\n      showLegIcon,\n      timeOptions\n    } = this.props;\n    const { expanded } = this.state;\n\n    if (leg.mode === \"CAR\" && leg.hailedCar) {\n      return (\n        <TNCLeg\n          config={config}\n          followsTransit={followsTransit}\n          leg={leg}\n          LegIcon={LegIcon}\n          onSummaryClick={this.onSummaryClick}\n          showLegIcon={showLegIcon}\n          timeOptions={timeOptions}\n        />\n      );\n    }\n\n    return (\n      <>\n        {/* Place subheading: rented vehicle (e.g., scooter, bike, car)\n          pickup */}\n        {leg && (leg.rentedVehicle || leg.rentedBike || leg.rentedCar) && (\n          <RentedVehicleSubheader config={config} leg={leg} />\n        )}\n        <Styled.LegBody>\n          <AccessLegSummary\n            config={config}\n            leg={leg}\n            LegIcon={LegIcon}\n            onSummaryClick={this.onSummaryClick}\n            showLegIcon={showLegIcon}\n          />\n          <Styled.StepsHeader\n            aria-expanded={expanded}\n            onClick={this.onStepsHeaderClick}\n          >\n            {coreUtils.time.formatDuration(leg.duration)}\n            {leg.steps && (\n              <span>\n                {\" \"}\n                <Styled.CaretToggle expanded={expanded} />\n              </span>\n            )}\n          </Styled.StepsHeader>\n          <MapillaryButton\n            coords={leg.from}\n            clickCallback={mapillaryCallback}\n            mapillaryKey={mapillaryKey}\n            padTop\n          />\n          <LegDiagramPreview\n            diagramVisible={diagramVisible}\n            leg={leg}\n            setLegDiagram={setLegDiagram}\n            showElevationProfile={showElevationProfile}\n          />\n          <VelocityTransitionGroup\n            enter={{ animation: \"slideDown\" }}\n            leave={{ animation: \"slideUp\" }}\n          >\n            {expanded && (\n              <AccessLegSteps\n                steps={leg.steps}\n                mapillaryCallback={mapillaryCallback}\n                mapillaryKey={mapillaryKey}\n              />\n            )}\n          </VelocityTransitionGroup>\n        </Styled.LegBody>\n      </>\n    );\n  }\n}\n\nAccessLegBody.propTypes = {\n  config: coreUtils.types.configType.isRequired,\n  /**\n   * Should be either null or a legType. Indicates that a particular leg diagram\n   * has been selected and is active.\n   */\n  diagramVisible: coreUtils.types.legType,\n  followsTransit: PropTypes.bool,\n  leg: coreUtils.types.legType.isRequired,\n  LegIcon: PropTypes.elementType.isRequired,\n  legIndex: PropTypes.number.isRequired,\n  mapillaryCallback: PropTypes.func,\n  mapillaryKey: PropTypes.string,\n  setActiveLeg: PropTypes.func.isRequired,\n  setLegDiagram: PropTypes.func.isRequired,\n  showElevationProfile: PropTypes.bool.isRequired,\n  showLegIcon: PropTypes.bool.isRequired,\n  timeOptions: coreUtils.types.timeOptionsType\n};\n\nAccessLegBody.defaultProps = {\n  diagramVisible: null,\n  followsTransit: false,\n  mapillaryCallback: null,\n  mapillaryKey: null,\n  timeOptions: null\n};\n\nexport default AccessLegBody;\n\nexport {\n  AccessLegSteps,\n  AccessLegSummary,\n  LegDiagramPreview,\n  RentedVehicleSubheader,\n  Styled,\n  TNCLeg\n};\n"],"file":"index.js"}